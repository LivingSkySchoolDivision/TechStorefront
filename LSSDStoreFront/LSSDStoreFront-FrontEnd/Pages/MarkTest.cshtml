@page
@using System.Security.Claims;
@using LSSD.StoreFront.DB;
@using LSSD.StoreFront.Lib;
@model LSSDStoreFront_FrontEnd.Pages.MarkTestModel
@{
    ViewData["Title"] = "MarkTest";
}

<p>Identity: @User.Identity</p>
<p>User Identity Name: @User.Identity.Name</p>

@{
    string UserDisplayName = ((System.Security.Claims.ClaimsIdentity)User.Identity).Claims.Where(c => c.Type == "name").FirstOrDefault().Value;
}
<b>Is authenticated?: </b> @User.Identity.IsAuthenticated
<b>Display name:</b> @UserDisplayName
@*
    <table class="table">
        @foreach (var claim in User.Claims)
        {
            <tr>
                <td>@claim.Type</td>
                <td>@claim.Value</td>
            </tr>
        }
    </table>
*@

<h1>My Shopping Cart</h1>
<I>@Model.ShoppingCart.Items.Count Items</I>
<table class="table">
    <tr>
        <th>Item</th>
        <th>Quantity</th>
        <th>Price (per item)</th>
        <th>Price (total)</th>
    </tr>
    @foreach (ShoppingCartItem item in Model.ShoppingCart.Items)
    {
        <tr>
            <td>@item.Product.Name</td>
            <td>@item.Quantity</td>
            <td>$@item.Product.Price</td>
            <td>$@item.TotalPrice.ToString("#,##0.00")</td>
        </tr>
    }
</table>

